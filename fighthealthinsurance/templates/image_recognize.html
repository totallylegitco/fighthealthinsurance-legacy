{% extends 'base.html' %}
{% load compress %}
{% load static %}
{% block scriptmagic %}
<script type="importmap">
  {
      "imports": {
	  "tesseract.js": "{% static 'js/node_modules/tesseract.js/dist/tesseract.min.js' %}",
	  "pdfjs-dist": "{% static 'js/node_modules/pdfjs-dist/build/pdf.min.js' %}"
      }
  }
</script>
<script type="module" src='{% static "js/scan.js" %}'></script>
{% endblock scriptmagic %}
{% block content %}
<button id="clear_local"
       onclick="window.localStorage.clear()">
Clear Page Local Storage
</button>
<h2>Not transfered to server (uses JS local storage)</h2>
<label for="fname">First name:</label><br>
<input type="text" id="store_fname" name="fname"><br>
<label for="lname">Last name:</label><br>
<input type="text" id="store_lname" name="lname"><br>
<label for="street">Your street Address (e.g. 283 24th st)</label><br>
<input type="text" id="store_street" name="street"><br>
<h2>Transfered to server -- we store*</h2><br>
<input type="email" id="email" name="email"><br>

<h2>Not transfered, we do not store (but your phone may store picture)</h2>
<input id="uploader" type="file" name="uploader" multiple="true">

<!-- Changing Label Text -->

<label class="custom-file-label" for="uploader">Scan & OCR your health insurance denial (select all pages)</label><br>
<form onsubmit="return validateForm(this)" method="post" action="{% url 'process' %}">
{% csrf_token %}
<h2>Transfered to server -- REMOVE PII FIRST! -- we store for ML + may review</h2><br>
{{form.as_div}}
<input type="submit">
</form>


*We store your raw e-mail to follow up after insurance company timelines may have expired so you can "remind" them. We also store a hashed version of your e-mail linked to your (cleaned) denial so you can request removal from our database (should you wish). If you opt-in, we may follow up by e-mail after reviewing your denial with a better template if our ML model does not find a good model on the first pass through. You may choose to use a different or temporary e-mail service, like <a href="https://proton.me/">proton mail.</a> Please review our <a href="{% url 'privacy_policy' %}">privacy policy for more details</a>

{% endblock content %}
